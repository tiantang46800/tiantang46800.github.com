---
layout: post
title: "fs_cs8900"
description: ""
category: 2410开发板
tags: 
  - 开发板
  - 优龙
  - 网络驱动
  - 3.10.12
---
{% include JB/setup %}
###项目分类
####目标：支持新内核3.10.12，但是网络不工作
####思路：剖析以前的cs8900驱动代码，完成新内核的移植
        1. 把以前2.6.35内核的cs8900添加的代码提取出来
            主要2个部分，
                        a:平台设备，地址映射
                        b:cs8900的驱动
            实验：把b的驱动单独做模块，然后加载，成功；
            思考使用ioremap把a步骤合并到b步骤里面，使代码变成一个；
                代码验证ok；[code](https://github.com/tiantang46800/new_2410/tree/master/driver/cs8900/old_2410_cs8900)
        2. 分析现有的代码....(明天继续)



##问题
    1. 0x19000000为什么是网卡的开始地址，真实的io空间地址为0x18000000
            ARM体系中，io空间是同一编址的，因此电路设计的时候用高位地址线（ADDR24）经过组合逻辑的译码来区分io空间和内存空间的读写。
            如果使用nGCS3的CS8900A，它的内存地址空间为0x19000000（ADDR24=1），IO空间地址为0x18000000；（好像倒了？）

        
